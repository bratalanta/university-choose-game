{"version":3,"sources":["js/const.js","js/common.js","js/win.js"],"names":["AppRoute","Home","Lose","Level1","Level2","Level3","Win","Rules","StorageField","Name","Theme","Complexity","Lvl","HeartsCount","Points","TimeLeft","Easy","Medium","Hard","ComplexityTranslation","ComplexityExtraPointsFactor","StartFeatures","Level","LevelData","easy","WinPoints","ErrorPoints","Time","medium","hard","NEXT_LEVEL_TRANSITION_TIME","redirect","evt","path","preventDefault","location","replace","setTheme","theme","document","querySelector","style","background","ThemeImage","getCurrentUserData","name","localStorage","getItem","complexity","lvl","points","heartsCount","timeLeft","reducePoints","playerPointsElement","reducedPoints","Number","setItem","innerText","reduceHeartsCount","heartsListElement","firstErrorHeartsCount","secondErrorHeartsCount","children","src","HeartImage","launchTimer","timerElement","checkBtn","launchTime","min","Math","floor","sec","timer","setInterval","classList","contains","clearInterval","toggle","startLevel","authorLink","playerName","playerPoints","winPoints","errorPoints","backToHomeLink","heartsList","i","display","window","addEventListener","resetStorage","setPoints","modalExtraPointsElement","extraPoints","round","goNextLevel","lvlPath","modal","add","remove","setTimeout","totalPointsElement","downloadBtn","backHomeLink","downloadFile","content","fileName","a","createElement","file","Blob","type","href","URL","createObjectURL","download","click","revokeObjectURL","handleDownloadBtnClick","textarea","now","Date","value","toLocaleDateString","toLocaleTimeString"],"mappings":"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","file":"win.330ed613.js","sourceRoot":"..\\src","sourcesContent":["export const AppRoute = {\n    Home: '/index.html',\n    Lose: '/lose.html',\n    Level1: '/level1.html',\n    Level2: '/level2.html',\n    Level3: '/level3.html',\n    Win: '/win.html',\n    Rules: '/rules.html',\n}\n\nexport const StorageField = {\n    Name: 'name',\n    Theme: 'theme',\n    Complexity: 'complexity',\n    Lvl: 'lvl',\n    HeartsCount: 'hearts',\n    Points: 'points',\n    TimeLeft: 'timeLeft'\n}\n\nexport const Complexity = {\n    Easy: 'easy',\n    Medium: 'medium',\n    Hard: 'hard'\n}\n\nexport const ComplexityTranslation = {\n    [Complexity.Easy]: 'лёгкий',\n    [Complexity.Medium]: 'средний',\n    [Complexity.Hard]: 'сложный'\n}\n\nexport const ComplexityExtraPointsFactor = {\n    [Complexity.Easy]: 10,\n    [Complexity.Medium]: 5,\n    [Complexity.Hard]: 1,\n}\n\nexport const StartFeatures = {\n    Level: 1,\n    HeartsCount: 3,\n    Points: 0\n}\n\nexport const LevelData = {\n\t1: {\n\t\tComplexity: {\n\t\t\teasy: {\n\t\t\t\tWinPoints: 5,\n\t\t\t\tErrorPoints: -1,\n\t\t\t\tTime: 30\n\t\t\t},\n\t\t\tmedium: {\n\t\t\t\tWinPoints: 7,\n\t\t\t\tErrorPoints: -3,\n\t\t\t\tTime: 20\n\t\t\t},\n\t\t\thard: {\n\t\t\t\tWinPoints: 15,\n\t\t\t\tErrorPoints: -5,\n\t\t\t\tTime: 15\n\t\t\t}\n\t\t}\n\t},\n\t2: {\n\t\tComplexity: {\n\t\t\teasy: {\n\t\t\t\tWinPoints: 10,\n\t\t\t\tErrorPoints: -3,\n\t\t\t\tTime: 60\n\t\t\t},\n\t\t\tmedium: {\n\t\t\t\tWinPoints: 15,\n\t\t\t\tErrorPoints: -5,\n\t\t\t\tTime: 40\n\t\t\t},\n\t\t\thard: {\n\t\t\t\tWinPoints: 20,\n\t\t\t\tErrorPoints: -7,\n\t\t\t\tTime: 30\n\t\t\t}\n\t\t}\n\t},\n\t3: {\n\t\tComplexity: {\n\t\t\teasy: {\n\t\t\t\tWinPoints: 15,\n\t\t\t\tErrorPoints: -5,\n\t\t\t\tTime: 60\n\t\t\t},\n\t\t\tmedium: {\n\t\t\t\tWinPoints: 20,\n\t\t\t\tErrorPoints: -7,\n\t\t\t\tTime: 40\n\t\t\t},\n\t\t\thard: {\n\t\t\t\tWinPoints: 30,\n\t\t\t\tErrorPoints: -9,\n\t\t\t\tTime: 30\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport const NEXT_LEVEL_TRANSITION_TIME = 2000\n","import { AppRoute, ComplexityExtraPointsFactor, LevelData, NEXT_LEVEL_TRANSITION_TIME, StartFeatures, StorageField } from \"./const.js\"\nimport HeartImage from '../img/game/hearts/*.png';\nimport ThemeImage from '../img/game/themes/*.jpg';\n\nexport const redirect = (evt, path) => {\n    evt.preventDefault()\n\n    location.replace(path)\n}\n\nexport const setTheme = (theme) => {\n    document.querySelector('.bg').style.background = `url(${ThemeImage[theme]}) no-repeat center`\n}\n\nexport const getCurrentUserData = () => (\n    {\n        name: localStorage.getItem(StorageField.Name),\n        theme: localStorage.getItem(StorageField.Theme),\n        complexity: localStorage.getItem(StorageField.Complexity),\n        lvl: localStorage.getItem(StorageField.Lvl),\n        points: localStorage.getItem(StorageField.Points),\n        heartsCount: localStorage.getItem(StorageField.HeartsCount),\n        timeLeft: localStorage.getItem(StorageField.TimeLeft)\n    }\n)\n\nexport const reducePoints = () => {\n    const {\n        complexity,\n        lvl,\n        points\n    } = getCurrentUserData()\n    const playerPointsElement = document.querySelector('.player-points__number')\n\n    const reducedPoints = Number(points) + LevelData[lvl].Complexity[complexity].ErrorPoints\n\n    localStorage.setItem(StorageField.Points, reducedPoints < 0 ? 0 : reducedPoints)\n    playerPointsElement.innerText = reducedPoints < 0 ? 0 : reducedPoints\n}\n\nexport const reduceHeartsCount = () => {\n    const {\n        heartsCount\n    } = getCurrentUserData()\n    const heartsListElement = document.querySelector('.hearts')\n\n    const firstErrorHeartsCount = StartFeatures.HeartsCount - 1\n    const secondErrorHeartsCount = StartFeatures.HeartsCount - 2\n\n    switch(heartsCount - 1) {\n        case firstErrorHeartsCount:\n            heartsListElement.children[firstErrorHeartsCount].src = HeartImage['black_heart'];\n            localStorage.setItem(StorageField.HeartsCount, firstErrorHeartsCount)\n            break\n        case secondErrorHeartsCount:\n            heartsListElement.children[secondErrorHeartsCount].src = HeartImage['black_heart']\n            localStorage.setItem(StorageField.HeartsCount, secondErrorHeartsCount)\n            break\n        case 0:\n            heartsListElement.children[0].src = HeartImage['black_heart']\n            location.replace(AppRoute.Lose)\n    }\n}\n\nexport const launchTimer = () => {\n    const timerElement = document.querySelector('.header__timer')\n    const checkBtn = document.querySelector('.footer__check')\n\n    const {\n        timeLeft,\n        complexity,\n        lvl\n    } = getCurrentUserData()\n\n    const launchTime = timeLeft ? timeLeft : LevelData[lvl].Complexity[complexity].Time\n    let min = Math.floor(launchTime / 60)\n    let sec = launchTime % 60\n\n    const timer = setInterval(() => {\n        if (checkBtn.classList.contains('passed')) {\n            clearInterval(timer)\n\n            return\n        }\n\n        localStorage.setItem(StorageField.TimeLeft, min * 60 + sec)\n        timerElement.innerText=`0${min}:${sec / 10 >= 1 ? sec : `0${sec}`}`\n\n        if (sec === 0 && min === 0) {\n            location.replace(AppRoute.Lose)\n            clearInterval(timer);\n        }\n\n        sec--\n\n        if (min < 1 && sec < 10) {\n            timerElement.classList.toggle('end')\n        }\n\n        if (sec < 0) {\n            min--\n            sec = 59\n        }\n\n    }, 1000);\n}\n\nexport const startLevel = () => {\n    const {\n        name,\n        theme,\n        complexity,\n        lvl,\n        points,\n        heartsCount\n    } = getCurrentUserData()\n\n    const authorLink = document.querySelector('.footer__author')\n    const playerName = document.querySelector('.level-info__player-name')\n    const playerPoints = document.querySelector('.player-points__number')\n    const winPoints = document.querySelector('.win-points__number')\n    const errorPoints = document.querySelector('.error-points__number')\n    const backToHomeLink = document.querySelector('.menu__item-link')\n    const heartsList = document.querySelector('.hearts')\n\n    for (let i = 0; i < StartFeatures.HeartsCount - heartsCount; i++) {\n        if (heartsCount === StartFeatures.HeartsCount) {\n            break\n        }\n\n        heartsList.children[StartFeatures.HeartsCount - 1 - i].src = HeartImage['black_heart']\n    }\n\n    playerName.innerText = name\n    playerPoints.innerText = points\n    winPoints.innerText = '+' + LevelData[lvl].Complexity[complexity].WinPoints\n    errorPoints.innerText = LevelData[lvl].Complexity[complexity].ErrorPoints\n    authorLink.style.display = 'none'\n\n    window.addEventListener('load', () => launchTimer())\n    backToHomeLink.addEventListener('click', (evt) => redirect(evt, AppRoute.Home))\n    setTheme(theme)\n}\n\nexport const resetStorage = (shouldResetPoints = true) => {\n    if (shouldResetPoints) {\n        localStorage.setItem(StorageField.Points, StartFeatures.Points);\n    }\n\n    localStorage.setItem(StorageField.TimeLeft, '');\n    localStorage.setItem(StorageField.Lvl, StartFeatures.Level);\n\tlocalStorage.setItem(StorageField.HeartsCount, StartFeatures.HeartsCount);\n}\n\nconst setPoints = () => {\n    const modalExtraPointsElement = document.querySelector('.extra-points__number')\n    const {\n        complexity,\n        points,\n        timeLeft,\n        lvl,\n    } = getCurrentUserData()\n\n    const winPoints = Number(points) + LevelData[lvl].Complexity[complexity].WinPoints\n    const extraPoints = Math.round(timeLeft / ComplexityExtraPointsFactor[complexity])\n    modalExtraPointsElement.innerText = extraPoints\n\n    localStorage.setItem(StorageField.Points, winPoints + extraPoints)\n}\n\nexport const goNextLevel = (lvlPath) => {\n    const {\n        lvl,\n    } = getCurrentUserData()\n\n    const modal = document.querySelector('.modal')\n    document.querySelector('.footer__check').classList.add('passed')\n    modal.classList.remove('hidden')\n\n    setPoints()\n    localStorage.setItem(StorageField.Lvl, Number(lvl) + 1)\n    localStorage.setItem(StorageField.TimeLeft, '');\n\n    setTimeout(() => {\n        location.replace(lvlPath)\n    }, NEXT_LEVEL_TRANSITION_TIME);\n}\n","import { getCurrentUserData, redirect, setTheme } from \"./common.js\"\nimport { AppRoute, ComplexityTranslation } from \"./const.js\"\n\nconst totalPointsElement = document.querySelector('.content__points-number')\nconst downloadBtn = document.querySelector('.download')\nconst backHomeLink = document.querySelector('.content__win-link-home')\n\nconst {\n    points,\n    name,\n    complexity,\n    heartsCount,\n    theme\n} = getCurrentUserData()\nsetTheme(theme)\ntotalPointsElement.innerText = points\n\nconst downloadFile = (content, fileName) => {\n    const a = document.createElement('a')\n    const file = new Blob([content], {type: 'text/plain'})\n    a.href = URL.createObjectURL(file)\n    a.download = fileName\n    a.click()\n    URL.revokeObjectURL(a.href)\n}\n\nconst handleDownloadBtnClick = () => {\n    const textarea = document.createElement('textarea')\n    const now = new Date()\n\n    textarea.value = `\n        ${name}! Твой результат прохождения игры \"Выбери нужное\" на уровне сложности \"${ComplexityTranslation[complexity]}\":\\n\n        Очки: ${points}\n        Осталось жизней: ${heartsCount}\n\n        ${now.toLocaleDateString()}\n        `\n\n    const fileName = `${name}_${now.toLocaleTimeString()}.txt`\n    downloadFile(textarea.value, fileName)\n}\n\ndownloadBtn.addEventListener('click', handleDownloadBtnClick)\nbackHomeLink.addEventListener('click', (evt) => redirect(evt, AppRoute.Home))\n"]}